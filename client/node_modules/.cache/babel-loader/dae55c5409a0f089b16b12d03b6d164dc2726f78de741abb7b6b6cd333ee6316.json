{"ast":null,"code":"var _jsxFileName = \"D:\\\\secure voting system\\\\client\\\\src\\\\pages\\\\Vote.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { useAuth } from '../contexts/AuthContext';\nimport FingerprintScanner from '../components/FingerprintScanner';\nimport FaceCapture from '../components/FaceCapture';\nimport DashboardLayout from '../components/DashboardLayout';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Vote = () => {\n  _s();\n  const {\n    electionId\n  } = useParams();\n  const {\n    user,\n    token\n  } = useAuth();\n  const navigate = useNavigate();\n  const [election, setElection] = useState(null);\n  const [candidates, setCandidates] = useState([]);\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\n  const [fingerprintVerified, setFingerprintVerified] = useState(false);\n  const [faceVerified, setFaceVerified] = useState(false);\n  const [useFace, setUseFace] = useState(false);\n  const [capturedFace, setCapturedFace] = useState(null);\n  const [submitting, setSubmitting] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [geo, setGeo] = useState({\n    lat: null,\n    lng: null,\n    accuracy: null,\n    error: ''\n  });\n  useEffect(() => {\n    if (!electionId) {\n      navigate('/elections', {\n        replace: true\n      });\n      return;\n    }\n    const fetchElectionAndCandidates = async () => {\n      try {\n        setLoading(true);\n\n        // Try primary: GET /api/elections/:electionId (should include embedded candidates)\n        let electionData = null;\n        let candidateList = [];\n        try {\n          var _eRes$data, _eRes$data2, _eRes$data3, _electionData;\n          const eRes = await axios.get(`/api/elections/${electionId}`);\n          electionData = ((_eRes$data = eRes.data) === null || _eRes$data === void 0 ? void 0 : _eRes$data.election) || ((_eRes$data2 = eRes.data) === null || _eRes$data2 === void 0 ? void 0 : _eRes$data2.election) || null;\n          // Candidates are returned at top-level: { election, candidates: [...] }\n          const topLevelCandidates = Array.isArray((_eRes$data3 = eRes.data) === null || _eRes$data3 === void 0 ? void 0 : _eRes$data3.candidates) ? eRes.data.candidates : [];\n          candidateList = Array.isArray((_electionData = electionData) === null || _electionData === void 0 ? void 0 : _electionData.candidates) && electionData.candidates.length ? electionData.candidates : topLevelCandidates;\n        } catch (errPrimary) {\n          console.error('Election fetch failed, falling back to list:', errPrimary);\n          // Fallback: GET /api/elections then find by electionId (no candidates)\n          try {\n            var _listRes$data;\n            const listRes = await axios.get('/api/elections');\n            const list = Array.isArray((_listRes$data = listRes.data) === null || _listRes$data === void 0 ? void 0 : _listRes$data.elections) ? listRes.data.elections : Array.isArray(listRes.data) ? listRes.data : [];\n            electionData = list.find(e => String(e.electionId || e._id) === String(electionId)) || null;\n          } catch (errList) {\n            console.error('Elections list fetch failed:', errList);\n            electionData = null;\n          }\n        }\n        setElection(electionData);\n\n        // If no embedded candidates, attempt admin candidates (may require admin)\n        if (!candidateList.length && electionData) {\n          try {\n            var _adminList$data;\n            const adminList = await axios.get('/api/admin/candidates');\n            const all = Array.isArray((_adminList$data = adminList.data) === null || _adminList$data === void 0 ? void 0 : _adminList$data.candidates) ? adminList.data.candidates : [];\n            candidateList = all.filter(c => {\n              var _c$electionId;\n              return String(((_c$electionId = c.electionId) === null || _c$electionId === void 0 ? void 0 : _c$electionId._id) || c.electionId || c.election) === String(electionId);\n            });\n          } catch (errAdmin) {\n            console.error('Error fetching admin candidates (may be restricted):', errAdmin);\n            candidateList = [];\n          }\n        }\n\n        // Only registered/approved candidates\n        const filtered = candidateList.filter(c => c.isRegistered === true || c.approved === true || c.status === 'approved' || c.status === 'registered' || typeof c.isRegistered === 'undefined');\n\n        // Normalize shape\n        const normalized = filtered.map(c => ({\n          candidateId: String(c.candidateId || c._id || c.id || ''),\n          name: c.name || c.candidateName || 'Candidate',\n          party: c.party || c.partyName || '',\n          description: c.description || c.bio || '',\n          image: c.image || null\n        }));\n        setCandidates(normalized);\n      } catch (err) {\n        console.error('Error loading election/candidates:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchElectionAndCandidates();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [electionId]);\n\n  // Capture live location on entry\n  useEffect(() => {\n    if (!('geolocation' in navigator)) {\n      setGeo(g => ({\n        ...g,\n        error: 'Geolocation not supported'\n      }));\n      return;\n    }\n    const onSuccess = pos => {\n      setGeo({\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude,\n        accuracy: pos.coords.accuracy,\n        error: ''\n      });\n    };\n    const onError = err => {\n      setGeo(g => ({\n        ...g,\n        error: err.message || 'Location permission denied'\n      }));\n    };\n    navigator.geolocation.getCurrentPosition(onSuccess, onError, {\n      enableHighAccuracy: true,\n      timeout: 10000,\n      maximumAge: 30000\n    });\n  }, []);\n  const handleFingerprintVerification = verified => {\n    setFingerprintVerified(verified);\n  };\n  const handleFaceCapture = faceData => {\n    setCapturedFace(faceData);\n    setFaceVerified(!!faceData);\n  };\n  const handleVoteSubmit = async () => {\n    if (!selectedCandidate || !useFace && !fingerprintVerified || useFace && !faceVerified) {\n      return;\n    }\n    setSubmitting(true);\n    try {\n      await axios.post(`/api/votes/cast/${electionId}`, {\n        candidateId: selectedCandidate,\n        position: 'general',\n        boothId: 'WEB-CLIENT',\n        fingerprintData: useFace ? undefined : 'fingerprint-ok',\n        faceData: useFace ? capturedFace : undefined,\n        location: geo.lat && geo.lng ? {\n          lat: geo.lat,\n          lng: geo.lng,\n          accuracy: geo.accuracy\n        } : undefined\n      }, {\n        headers: token ? {\n          Authorization: `Bearer ${token}`\n        } : {}\n      });\n      navigate('/dashboard');\n    } catch (e) {\n      var _e$response, _e$response$data;\n      const message = (e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to cast vote';\n      console.error('Vote submit failed', e);\n      // Show user-friendly message\n      if (typeof message === 'string') {\n        // Highlight the already-voted case\n        if (message.toLowerCase().includes('already voted')) {\n          toast.info('You have already voted in this election.');\n          // Optionally redirect after a short delay\n          setTimeout(() => navigate('/dashboard'), 800);\n        } else {\n          toast.error(message);\n        }\n      } else {\n        toast.error('Failed to cast vote');\n      }\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Voting\",\n      subtitle: \"Loading election details...\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-center py-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"spinner mr-3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-neutral-600\",\n          children: \"Loading election...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this);\n  }\n  if (!election) {\n    return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n      title: \"Voting\",\n      subtitle: \"Election not found\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-12\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-8 h-8 text-red-600\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-xl font-semibold text-neutral-600 mb-2\",\n          children: \"Election Not Found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-neutral-500\",\n          children: \"The election you're looking for doesn't exist or has been removed.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary mt-4\",\n          onClick: () => navigate('/dashboard'),\n          children: \"Back to Dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(DashboardLayout, {\n    title: \"Cast Your Vote\",\n    subtitle: `Participating in: ${election.title}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-8 h-8 text-white\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-h2 text-neutral-900 mb-4\",\n          children: election.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-body-lg text-neutral-600 mb-6 max-w-3xl mx-auto\",\n          children: election.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center space-x-6 text-sm text-neutral-500\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-4 h-4 mr-1\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Ends: \", new Date(election.endDate).toLocaleDateString()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              className: \"w-4 h-4 mr-1\",\n              fill: \"none\",\n              stroke: \"currentColor\",\n              viewBox: \"0 0 24 24\",\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                strokeLinecap: \"round\",\n                strokeLinejoin: \"round\",\n                strokeWidth: 2,\n                d: \"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Secure Voting\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-1 lg:grid-cols-3 gap-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lg:col-span-2\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-h3 text-neutral-900 mb-6 text-center\",\n            children: \"Select Your Candidate\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n            children: candidates.map((candidate, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: `bg-white border-2 rounded-2xl p-6 text-center cursor-pointer transition-all duration-300 hover:shadow-xl ${selectedCandidate === candidate.candidateId ? 'border-saffron-500 shadow-xl scale-105' : 'border-neutral-200 hover:border-saffron-300 hover:scale-[1.02]'}`,\n              onClick: () => setSelectedCandidate(candidate.candidateId),\n              style: {\n                transitionTimingFunction: 'cubic-bezier(0.22, 1, 0.36, 1)'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-20 h-20 bg-gradient-to-r from-saffron-500 to-chakra-blue-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\",\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-3xl font-bold text-white\",\n                    children: candidate.name.charAt(0)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 249,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                  className: \"text-xl font-bold text-neutral-900 mb-1\",\n                  children: candidate.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 253,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-chakra-blue-600 font-semibold mb-3 text-base\",\n                  children: candidate.party\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 254,\n                  columnNumber: 21\n                }, this), candidate.description && /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-neutral-600 text-sm leading-relaxed line-clamp-3\",\n                  children: candidate.description\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 23\n                }, this), selectedCandidate === candidate.candidateId && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4 inline-flex items-center px-2.5 py-1 rounded-full bg-saffron-100\",\n                  children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"w-4 h-4 text-saffron-700 mr-1\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: 2,\n                      d: \"M9 12l2 2 4-4\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 261,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-saffron-700 font-semibold text-xs\",\n                    children: \"Selected\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 19\n              }, this)\n            }, candidate.candidateId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 237,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex bg-gray-100 rounded-xl p-1 mb-4 gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setUseFace(false),\n              className: `flex-1 py-2 rounded-lg text-sm font-semibold transition ${!useFace ? 'bg-white shadow ring-1 ring-saffron-300' : 'hover:bg-white/60'}`,\n              children: \"Fingerprint\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => setUseFace(true),\n              className: `flex-1 py-2 rounded-lg text-sm font-semibold transition ${useFace ? 'bg-white shadow ring-1 ring-saffron-300' : 'hover:bg-white/60'}`,\n              children: \"Face ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-h4 text-neutral-900 mb-6 text-center\",\n            children: useFace ? 'Face ID Verification' : 'Fingerprint Verification'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-md mx-auto\",\n            children: [useFace ? /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-4\",\n              children: [/*#__PURE__*/_jsxDEV(FaceCapture, {\n                onCapture: handleFaceCapture\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 19\n              }, this), capturedFace && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"rounded-xl overflow-hidden border border-neutral-200\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: capturedFace,\n                  alt: \"Face preview\",\n                  style: {\n                    width: '100%',\n                    maxHeight: 260,\n                    objectFit: 'cover'\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 304,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 300,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(FingerprintScanner, {\n              onVerification: handleFingerprintVerification\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 17\n            }, this), !useFace && fingerprintVerified && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 text-green-600 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 318,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 317,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-800 font-medium text-sm\",\n                children: \"Fingerprint verified\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 17\n            }, this), useFace && faceVerified && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 text-green-600 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 326,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-green-800 font-medium text-sm\",\n                children: \"Face captured\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: `w-full py-4 text-lg font-semibold rounded-xl transition-all duration-200 flex items-center justify-center ${!selectedCandidate || !useFace && !fingerprintVerified || useFace && !faceVerified || submitting ? 'bg-neutral-300 text-neutral-500 cursor-not-allowed' : 'bg-saffron-500 hover:bg-saffron-600 text-white shadow-lg hover:shadow-xl'}`,\n              onClick: handleVoteSubmit,\n              disabled: !selectedCandidate || !useFace && !fingerprintVerified || useFace && !faceVerified || submitting,\n              children: submitting ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"spinner mr-3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 21\n                }, this), \"Submitting Vote...\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center justify-center\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5 mr-2\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 354,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 353,\n                  columnNumber: 21\n                }, this), \"Submit Vote\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 352,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"w-full py-3 bg-white border-2 border-neutral-300 hover:border-saffron-300 text-neutral-700 hover:text-saffron-700 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center\",\n              onClick: () => navigate('/dashboard'),\n              children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                className: \"w-5 h-5 mr-2\",\n                fill: \"none\",\n                stroke: \"currentColor\",\n                viewBox: \"0 0 24 24\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  strokeLinecap: \"round\",\n                  strokeLinejoin: \"round\",\n                  strokeWidth: 2,\n                  d: \"M6 18L18 6M6 6l12 12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 366,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 17\n              }, this), \"Cancel\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 pt-6 border-t border-neutral-200\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-3 text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-center justify-between ${selectedCandidate ? 'text-green-600' : 'text-neutral-400'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Candidate Selected\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 19\n                }, this), selectedCandidate ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5 text-green-600\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 379,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 378,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M6 18L18 6M6 6l12 12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 383,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 382,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-center justify-between ${!useFace && fingerprintVerified || useFace && faceVerified ? 'text-green-600' : 'text-neutral-400'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  children: useFace ? 'Face Captured' : 'Fingerprint Verified'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 19\n                }, this), !useFace && fingerprintVerified || useFace && faceVerified ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5 text-green-600\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 391,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-5 h-5\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M6 18L18 6M6 6l12 12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 395,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 373,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 199,\n    columnNumber: 5\n  }, this);\n};\n_s(Vote, \"sHojx9PvjuguAZJfj10xUCXu8Y0=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = Vote;\nexport default Vote;\nvar _c;\n$RefreshReg$(_c, \"Vote\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","toast","useAuth","FingerprintScanner","FaceCapture","DashboardLayout","jsxDEV","_jsxDEV","Vote","_s","electionId","user","token","navigate","election","setElection","candidates","setCandidates","selectedCandidate","setSelectedCandidate","fingerprintVerified","setFingerprintVerified","faceVerified","setFaceVerified","useFace","setUseFace","capturedFace","setCapturedFace","submitting","setSubmitting","loading","setLoading","geo","setGeo","lat","lng","accuracy","error","replace","fetchElectionAndCandidates","electionData","candidateList","_eRes$data","_eRes$data2","_eRes$data3","_electionData","eRes","get","data","topLevelCandidates","Array","isArray","length","errPrimary","console","_listRes$data","listRes","list","elections","find","e","String","_id","errList","_adminList$data","adminList","all","filter","c","_c$electionId","errAdmin","filtered","isRegistered","approved","status","normalized","map","candidateId","id","name","candidateName","party","partyName","description","bio","image","err","navigator","g","onSuccess","pos","coords","latitude","longitude","onError","message","geolocation","getCurrentPosition","enableHighAccuracy","timeout","maximumAge","handleFingerprintVerification","verified","handleFaceCapture","faceData","handleVoteSubmit","post","position","boothId","fingerprintData","undefined","location","headers","Authorization","_e$response","_e$response$data","response","toLowerCase","includes","info","setTimeout","title","subtitle","children","className","fileName","_jsxFileName","lineNumber","columnNumber","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onClick","Date","endDate","toLocaleDateString","candidate","index","style","transitionTimingFunction","charAt","type","onCapture","src","alt","width","maxHeight","objectFit","onVerification","disabled","_c","$RefreshReg$"],"sources":["D:/secure voting system/client/src/pages/Vote.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport FingerprintScanner from '../components/FingerprintScanner';\r\nimport FaceCapture from '../components/FaceCapture';\r\nimport DashboardLayout from '../components/DashboardLayout';\r\n\r\nconst Vote = () => {\r\n  const { electionId } = useParams();\r\n  const { user, token } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [election, setElection] = useState(null);\r\n  const [candidates, setCandidates] = useState([]);\r\n  const [selectedCandidate, setSelectedCandidate] = useState(null);\r\n  const [fingerprintVerified, setFingerprintVerified] = useState(false);\r\n  const [faceVerified, setFaceVerified] = useState(false);\r\n  const [useFace, setUseFace] = useState(false);\r\n  const [capturedFace, setCapturedFace] = useState(null);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [geo, setGeo] = useState({ lat: null, lng: null, accuracy: null, error: '' });\r\n\r\n  useEffect(() => {\r\n    if (!electionId) {\r\n      navigate('/elections', { replace: true });\r\n      return;\r\n    }\r\n\r\n    const fetchElectionAndCandidates = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        // Try primary: GET /api/elections/:electionId (should include embedded candidates)\r\n        let electionData = null;\r\n        let candidateList = [];\r\n        try {\r\n          const eRes = await axios.get(`/api/elections/${electionId}`);\r\n          electionData = eRes.data?.election || eRes.data?.election || null;\r\n          // Candidates are returned at top-level: { election, candidates: [...] }\r\n          const topLevelCandidates = Array.isArray(eRes.data?.candidates) ? eRes.data.candidates : [];\r\n          candidateList = Array.isArray(electionData?.candidates) && electionData.candidates.length\r\n            ? electionData.candidates\r\n            : topLevelCandidates;\r\n        } catch (errPrimary) {\r\n          console.error('Election fetch failed, falling back to list:', errPrimary);\r\n          // Fallback: GET /api/elections then find by electionId (no candidates)\r\n          try {\r\n            const listRes = await axios.get('/api/elections');\r\n            const list = Array.isArray(listRes.data?.elections) ? listRes.data.elections : (Array.isArray(listRes.data) ? listRes.data : []);\r\n            electionData = list.find(e => String(e.electionId || e._id) === String(electionId)) || null;\r\n          } catch (errList) {\r\n            console.error('Elections list fetch failed:', errList);\r\n            electionData = null;\r\n          }\r\n        }\r\n\r\n        setElection(electionData);\r\n\r\n        // If no embedded candidates, attempt admin candidates (may require admin)\r\n        if (!candidateList.length && electionData) {\r\n          try {\r\n            const adminList = await axios.get('/api/admin/candidates');\r\n            const all = Array.isArray(adminList.data?.candidates) ? adminList.data.candidates : [];\r\n            candidateList = all.filter(c => String(c.electionId?._id || c.electionId || c.election) === String(electionId));\r\n          } catch (errAdmin) {\r\n            console.error('Error fetching admin candidates (may be restricted):', errAdmin);\r\n            candidateList = [];\r\n          }\r\n        }\r\n\r\n        // Only registered/approved candidates\r\n        const filtered = candidateList.filter(c => c.isRegistered === true || c.approved === true || c.status === 'approved' || c.status === 'registered' || typeof c.isRegistered === 'undefined');\r\n\r\n        // Normalize shape\r\n        const normalized = filtered.map(c => ({\r\n          candidateId: String(c.candidateId || c._id || c.id || ''),\r\n          name: c.name || c.candidateName || 'Candidate',\r\n          party: c.party || c.partyName || '',\r\n          description: c.description || c.bio || '',\r\n          image: c.image || null\r\n        }));\r\n\r\n        setCandidates(normalized);\r\n      } catch (err) {\r\n        console.error('Error loading election/candidates:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchElectionAndCandidates();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [electionId]);\r\n\r\n  // Capture live location on entry\r\n  useEffect(() => {\r\n    if (!('geolocation' in navigator)) {\r\n      setGeo(g => ({ ...g, error: 'Geolocation not supported' }));\r\n      return;\r\n    }\r\n    const onSuccess = (pos) => {\r\n      setGeo({ lat: pos.coords.latitude, lng: pos.coords.longitude, accuracy: pos.coords.accuracy, error: '' });\r\n    };\r\n    const onError = (err) => {\r\n      setGeo(g => ({ ...g, error: err.message || 'Location permission denied' }));\r\n    };\r\n    navigator.geolocation.getCurrentPosition(onSuccess, onError, { enableHighAccuracy: true, timeout: 10000, maximumAge: 30000 });\r\n  }, []);\r\n\r\n  const handleFingerprintVerification = (verified) => {\r\n    setFingerprintVerified(verified);\r\n  };\r\n\r\n  const handleFaceCapture = (faceData) => {\r\n    setCapturedFace(faceData);\r\n    setFaceVerified(!!faceData);\r\n  };\r\n\r\n  const handleVoteSubmit = async () => {\r\n    if (!selectedCandidate || (!useFace && !fingerprintVerified) || (useFace && !faceVerified)) {\r\n      return;\r\n    }\r\n\r\n    setSubmitting(true);\r\n    \r\n    try {\r\n      await axios.post(\r\n        `/api/votes/cast/${electionId}`,\r\n        {\r\n          candidateId: selectedCandidate,\r\n          position: 'general',\r\n          boothId: 'WEB-CLIENT',\r\n          fingerprintData: useFace ? undefined : 'fingerprint-ok',\r\n          faceData: useFace ? capturedFace : undefined,\r\n          location: geo.lat && geo.lng ? { lat: geo.lat, lng: geo.lng, accuracy: geo.accuracy } : undefined\r\n        },\r\n        {\r\n          headers: token ? { Authorization: `Bearer ${token}` } : {}\r\n        }\r\n      );\r\n      navigate('/dashboard');\r\n    } catch (e) {\r\n      const message = e?.response?.data?.message || 'Failed to cast vote';\r\n      console.error('Vote submit failed', e);\r\n      // Show user-friendly message\r\n      if (typeof message === 'string') {\r\n        // Highlight the already-voted case\r\n        if (message.toLowerCase().includes('already voted')) {\r\n          toast.info('You have already voted in this election.');\r\n          // Optionally redirect after a short delay\r\n          setTimeout(() => navigate('/dashboard'), 800);\r\n        } else {\r\n          toast.error(message);\r\n        }\r\n      } else {\r\n        toast.error('Failed to cast vote');\r\n      }\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <DashboardLayout title=\"Voting\" subtitle=\"Loading election details...\">\r\n        <div className=\"flex items-center justify-center py-12\">\r\n          <div className=\"spinner mr-3\"></div>\r\n          <span className=\"text-neutral-600\">Loading election...</span>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  if (!election) {\r\n    return (\r\n      <DashboardLayout title=\"Voting\" subtitle=\"Election not found\">\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <svg className=\"w-8 h-8 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n          </div>\r\n          <h3 className=\"text-xl font-semibold text-neutral-600 mb-2\">Election Not Found</h3>\r\n          <p className=\"text-neutral-500\">The election you're looking for doesn't exist or has been removed.</p>\r\n          <button \r\n            className=\"btn btn-primary mt-4\"\r\n            onClick={() => navigate('/dashboard')}\r\n          >\r\n            Back to Dashboard\r\n          </button>\r\n        </div>\r\n      </DashboardLayout>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <DashboardLayout \r\n      title=\"Cast Your Vote\" \r\n      subtitle={`Participating in: ${election.title}`}\r\n    >\r\n      {/* Election Header */}\r\n      <div className=\"card mb-8\">\r\n        <div className=\"text-center\">\r\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-green-500 to-blue-600 rounded-full mb-4\">\r\n            <svg className=\"w-8 h-8 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n          </div>\r\n          <h1 className=\"text-h2 text-neutral-900 mb-4\">{election.title}</h1>\r\n          <p className=\"text-body-lg text-neutral-600 mb-6 max-w-3xl mx-auto\">{election.description}</p>\r\n          <div className=\"flex items-center justify-center space-x-6 text-sm text-neutral-500\">\r\n            <div className=\"flex items-center\">\r\n              <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n              </svg>\r\n              <span>Ends: {new Date(election.endDate).toLocaleDateString()}</span>\r\n            </div>\r\n            <div className=\"flex items-center\">\r\n              <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\r\n              </svg>\r\n              <span>Secure Voting</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n        {/* Candidate Selection */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"card\">\r\n            <h2 className=\"text-h3 text-neutral-900 mb-6 text-center\">Select Your Candidate</h2>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              {candidates.map((candidate, index) => (\r\n                <div \r\n                  key={candidate.candidateId} \r\n                  className={`bg-white border-2 rounded-2xl p-6 text-center cursor-pointer transition-all duration-300 hover:shadow-xl ${\r\n                    selectedCandidate === candidate.candidateId \r\n                      ? 'border-saffron-500 shadow-xl scale-105' \r\n                      : 'border-neutral-200 hover:border-saffron-300 hover:scale-[1.02]'\r\n                  }`}\r\n                  onClick={() => setSelectedCandidate(candidate.candidateId)}\r\n                  style={{ transitionTimingFunction: 'cubic-bezier(0.22, 1, 0.36, 1)' }}\r\n                >\r\n                  <div className=\"text-center\">\r\n                    <div className=\"w-20 h-20 bg-gradient-to-r from-saffron-500 to-chakra-blue-500 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg\">\r\n                      <span className=\"text-3xl font-bold text-white\">\r\n                        {candidate.name.charAt(0)}\r\n                      </span>\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-neutral-900 mb-1\">{candidate.name}</h3>\r\n                    <p className=\"text-chakra-blue-600 font-semibold mb-3 text-base\">{candidate.party}</p>\r\n                    {candidate.description && (\r\n                      <p className=\"text-neutral-600 text-sm leading-relaxed line-clamp-3\">{candidate.description}</p>\r\n                    )}\r\n                    {selectedCandidate === candidate.candidateId && (\r\n                      <div className=\"mt-4 inline-flex items-center px-2.5 py-1 rounded-full bg-saffron-100\">\r\n                        <svg className=\"w-4 h-4 text-saffron-700 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4\" />\r\n                        </svg>\r\n                        <span className=\"text-saffron-700 font-semibold text-xs\">Selected</span>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Voting Process */}\r\n        <div className=\"space-y-6\">\r\n          {/* Biometric Method Toggle */}\r\n          <div className=\"card\">\r\n            <div className=\"flex bg-gray-100 rounded-xl p-1 mb-4 gap-2\">\r\n              <button \r\n                type=\"button\" \r\n                onClick={() => setUseFace(false)} \r\n                className={`flex-1 py-2 rounded-lg text-sm font-semibold transition ${!useFace ? 'bg-white shadow ring-1 ring-saffron-300' : 'hover:bg-white/60'}`}\r\n              >\r\n                Fingerprint\r\n              </button>\r\n              <button \r\n                type=\"button\" \r\n                onClick={() => setUseFace(true)} \r\n                className={`flex-1 py-2 rounded-lg text-sm font-semibold transition ${useFace ? 'bg-white shadow ring-1 ring-saffron-300' : 'hover:bg-white/60'}`}\r\n              >\r\n                Face ID\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Fingerprint / Face Verification */}\r\n          <div className=\"card\">\r\n            <h3 className=\"text-h4 text-neutral-900 mb-6 text-center\">{useFace ? 'Face ID Verification' : 'Fingerprint Verification'}</h3>\r\n            <div className=\"max-w-md mx-auto\">\r\n              {useFace ? (\r\n                <div className=\"space-y-4\">\r\n                  <FaceCapture onCapture={handleFaceCapture} />\r\n                  {capturedFace && (\r\n                    <div className=\"rounded-xl overflow-hidden border border-neutral-200\">\r\n                      <img \r\n                        src={capturedFace} \r\n                        alt=\"Face preview\" \r\n                        style={{ width: '100%', maxHeight: 260, objectFit: 'cover' }} \r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <FingerprintScanner onVerification={handleFingerprintVerification} />\r\n              )}\r\n              {!useFace && fingerprintVerified && (\r\n                <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center\">\r\n                  <svg className=\"w-5 h-5 text-green-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                  <span className=\"text-green-800 font-medium text-sm\">Fingerprint verified</span>\r\n                </div>\r\n              )}\r\n              {useFace && faceVerified && (\r\n                <div className=\"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center\">\r\n                  <svg className=\"w-5 h-5 text-green-600 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                  </svg>\r\n                  <span className=\"text-green-800 font-medium text-sm\">Face captured</span>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Action Buttons */}\r\n          <div className=\"card\">\r\n            <div className=\"space-y-4\">\r\n              <button\r\n                className={`w-full py-4 text-lg font-semibold rounded-xl transition-all duration-200 flex items-center justify-center ${\r\n                  !selectedCandidate || (!useFace && !fingerprintVerified) || (useFace && !faceVerified) || submitting\r\n                    ? 'bg-neutral-300 text-neutral-500 cursor-not-allowed'\r\n                    : 'bg-saffron-500 hover:bg-saffron-600 text-white shadow-lg hover:shadow-xl'\r\n                }`}\r\n                onClick={handleVoteSubmit}\r\n                disabled={!selectedCandidate || (!useFace && !fingerprintVerified) || (useFace && !faceVerified) || submitting}\r\n              >\r\n                {submitting ? (\r\n                  <div className=\"flex items-center justify-center\">\r\n                    <div className=\"spinner mr-3\"></div>\r\n                    Submitting Vote...\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex items-center justify-center\">\r\n                    <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                    Submit Vote\r\n                  </div>\r\n                )}\r\n              </button>\r\n              \r\n              <button\r\n                className=\"w-full py-3 bg-white border-2 border-neutral-300 hover:border-saffron-300 text-neutral-700 hover:text-saffron-700 rounded-xl font-semibold transition-all duration-200 flex items-center justify-center\"\r\n                onClick={() => navigate('/dashboard')}\r\n              >\r\n                <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                </svg>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n            \r\n            {/* Voting Status */}\r\n            <div className=\"mt-6 pt-6 border-t border-neutral-200\">\r\n              <div className=\"space-y-3 text-sm\">\r\n                <div className={`flex items-center justify-between ${selectedCandidate ? 'text-green-600' : 'text-neutral-400'}`}>\r\n                  <span>Candidate Selected</span>\r\n                  {selectedCandidate ? (\r\n                    <svg className=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n                <div className={`flex items-center justify-between ${(!useFace && fingerprintVerified) || (useFace && faceVerified) ? 'text-green-600' : 'text-neutral-400'}`}>\r\n                  <span>{useFace ? 'Face Captured' : 'Fingerprint Verified'}</span>\r\n                  {((!useFace && fingerprintVerified) || (useFace && faceVerified)) ? (\r\n                    <svg className=\"w-5 h-5 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </DashboardLayout>\r\n  );\r\n};\r\n\r\nexport default Vote;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}